{"componentChunkName":"component---src-pages-templates-post-tsx","path":"/blog/49d0c78e-98c5-5910-b945-6722a64f8939/","result":{"data":{"post":{"frontmatter":{"date":"20 июня 2024","title":"Локальный агент для Azure Pipelines","keywords":["devops","azure","self-hosted build agent"]},"html":"<h2><strong>Локальный агент для Azure Pipelines</strong></h2>\n<p>Добро пожаловать в наше руководство по установке Агента Azure. В этой статье мы рассмотрим процесс установки локального агента для Azure Pipelines.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 900px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5b09e340899c3ea191d650dd40043308/2bef9/intro.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsSAAALEgHS3X78AAAEqUlEQVR42jVUC0xTVxhulmwzLts0xESjTKagQ9xE0SnETR1iRwsI8lbBLeAowgRxmELlUQSxTGiAUiwWoTw3yriWCuFVSgu1ZUBHKVZKYSChIFAYr9t7+7p390pMvpz8Oef/zv845/8INhSyYkCwFbYisAUzEBhBIBTFYcNsFLYhuIHiDtAWtlgEnIM5oUYLvmXCXFHUMmGEHy1ALRtGxAq+MYEQCoEwuAptYNchiBFBjdb3ZDyCfnNtEQbn19debYL9mn/3F/W7TcNxK5vZ+pVfp9f1VrhA2MebXZk1gn8ZoNdGI0axoPAW2TQGmgbmFtP7tPmTK2eTuPuedafOLLOGJ7y1hlOTG0mzq3GtAzS5VqAe79aq5i0msw3cimxZMUwDOuW9TrVXrdJVMm/foDimWyKPLnp16b7k9Xfq55JnliNVM8XPe0qkI0K5kq5bq1zESyCgqG1wZqpOP00pBgjEXE/ZfOCK+bjK8IVEv+dBy65cUdngKLlH+dubTUaDyKNQWKJQV6imZiEQ6x9hde2/czWaHWpor2LGuV5xOa38Gkdor7VGi7Wn89s/pTafAdRE6dTjXtVx39vkyISCxgbRwBA0rbCiCIHBFWyLKFC3+pZu1O+XLQfRq4kckWfdP5ldo04dqx9fLb6YUnGlvj+Q2+3Pav4qMss9h5vwQqrRjqKolXD74bPPbxUZrtsJKgM+qZu+1jfvVqXy4PQfqxy1i+d9+H38dxTmmVulHtTK4FaNg2+Sy73yiIaX4teTOFk3oXMulVFIocFU1iGeJrnjtWP91PaYyu0kGpHGeaDQkOvF7jeLnaKYN7MYh86E7SRSzz7pbOxToljay+vrzDL2hcQcB676aKHkQMYLp7Ds87TywJHZ0CVrQFWfXUD6AfewkyF3vkkq8S4ELhUKvi5sl8y9xR6Y0CVX7iYlBldLjmY+3++X5lXQED78hj2uv9g3f1g4tSso8+SNDCbtxpWoRLenMnKl1D2BdSKO9VA9h31EQs/LgQ8Oh/gw+OeLWy+3jbAnFxxfwTuT/3SNYTgEp53OA8hNgz/SK6KKqqJy8omPuLd5vKu5XGHvEF5zt3xw2yE/Ym4DRabzHV/9LJwZHHvH3j3c/1ZK6N0sbwbgVigKLO/yoORmUoIzJie8e5U+tJy8KiFOTmQDHx0J+SGt4lwSx7lE+m0kLSMuPonNv5THP3y3LAqQk6NoLo9b9qXw91zNvf6k6SduGxsQAiMDFiztxNLnBIcAx2hmRFmbazTDg9Vyv1l+JCTdo7Q9PLXEk8rLJp1ozLxQ0yW+Wcx/2K9NkI7VKoc1I2IbihIgC8ht6r5f1Sr5W8SJ9Y+Jjj1IF8TkcUKpnIOxnL10QRZfXJ36c6NcFsGTudT2kGqBIG7v2Mws3jCzDZsqNL30D7+CmrgyILui6VR8CSmbReH3+tB59OE5al37juQ6V3ZXJl/KqO/gdAwtLb01I8Z3I4mLhkk8oGoaGtcuGH6vELj+wvQDRoeWN8fW1g2oWSRR+N5hPhUp1o0QipgQPJjlvRi8EyAExUqwgmbQarNsGNdgyyaCwDYbLkz4EWJGEcuWSOHAxQfXn/8BLFwotU5H9gkAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Self-Hosted build Agent for Azure Pipelines\"\n        title=\"\"\n        src=\"/static/5b09e340899c3ea191d650dd40043308/1cfc2/intro.png\"\n        srcset=\"/static/5b09e340899c3ea191d650dd40043308/3684f/intro.png 225w,\n/static/5b09e340899c3ea191d650dd40043308/fc2a6/intro.png 450w,\n/static/5b09e340899c3ea191d650dd40043308/1cfc2/intro.png 900w,\n/static/5b09e340899c3ea191d650dd40043308/2bef9/intro.png 1024w\"\n        sizes=\"(max-width: 900px) 100vw, 900px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><strong>Что такое Azure DevOps??</strong></p>\n<p>Azure DevOps — это интегрированная служба, предоставляемая Azure. Как SaaS-предложение, она не имеет предустановленного хоста или, точнее, агента для выполнения операций. Следовательно, для эффективного использования нашего Pipeline Azure DevOps мы должны убедиться, что агент настроен в нашем Пуле Агентов. В этом блоге мы узнаем, как настроить агента, а затем как создать для него сервис.</p>\n<p><strong>Что такое Агент Azure?</strong></p>\n<p>Агент Azure — это программное обеспечение, позволяющее собирать код или развертывать ПО с помощью Azure Pipelines. Он служит мостом между вашей инфраструктурой и службами Azure, обеспечивая бесперебойный процесс автоматизации.</p>\n<p><strong>Есть два основных типа агентов:</strong></p>\n<p>• <em>Управляемые Майкрософт Агенты:</em>: Эти агенты управляются Майкрософт и не требуют настройки с вашей стороны.</p>\n<p>• <em>Локальные Агенты:</em>: Эти агенты настраиваются и управляются на вашей собственной инфраструктуре, что дает вам больше контроля над средой сборки. После установки агента на вашу машину вы можете установить любое другое программное обеспечение на эту машину, необходимое для ваших задач сборки или развертывания.</p>\n<p>Настройка локального Агента может показаться сложной, но, следуя приведенным ниже шагам, мы можем легко настроить агента в нашем Пуле Агентов.</p>\n<p>Итак, давайте двигаться шаг за шагом.</p>\n<h3>Шаг 1: Создание Пула Агентов</h3>\n<p>• Войдите на сайт <a href=\"%60https://portal.azure.com/%60\">Microsoft Azure</a></p>\n<p>• Войдите в свой проект разработки в DevOps (<code class=\"language-text\">https://dev.azure.com/&lt;имя вашего проекта></code>).</p>\n<p>• Перейдите в Настройки Проекта -> Pipelines -> Пулы Агентов и нажмите Создать Новый Пул Агентов.</p>\n<p>• Выберите локальный Агент.</p>\n<p>• Введите имя агента и нажмите Создать.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 655px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8b2b7aa13c3ae6912e058c2412e659cf/ae6b7/agent_pool.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 131.11111111111111%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAaCAYAAAC3g3x9AAAACXBIWXMAABJ0AAASdAHeZh94AAACE0lEQVR42q1VS27bMBTU6bLrMbrINXqCAgVygQI5QdfdGkW8cYrCCALUG9kLW5QsmaJIfTzlvPS5bpEYtlUCY1IUNe9x5pFOnHNI0xRZlgnyPJe+KAqc24ZhwH6/R9u2SIwxmE6nmM1mmEwmmM/n8rxYLNB1nSwiQgjw3svcv43vdW0yDPvDhEIJmqYREvbcCcH5t9oLYd+hthWstbG3GNMYLMlsi6dljrIwsHUtevBFHcensnmT0LgBP01A20SyKGzf97K1siwl64sJ+66Fd7V8PESy0Vt2UfDMxFLZbER8ZqjmcHwuKBUNTPghS2cTCdfrtUQ59dFr83RXTI26J2RlEVMzYzIBi5vgPKHPDMrn7XYr0LFqLRnudjssVyusTIV0nWO5KVD/rjnn/tQfwbXsKY2CJFoNL6bElDno4nbocqzzcaYwCrVjJDaeyWtwIKSgNIVb0SNH6Bm+BGIKndNyYSQ+q5vH5/sckEdcPr6y1E2+vEpD/tA9rSP2hF5VF2fIvauox+0aY0RDMttYb9Z51I2X3vlwcXaHDGlA5QJyG1C6FkUdYH03rmxs1DD4WPk8BRE+RnpNhrNMofh6MRAcE3rd63+JHrVTgYSQW2aWVVUdHOZYLwxWAC8ALSuu/+sfT44rtx0vBxKqo/+jBSW8pmkOH7484+bjN7y7e8CPtBhP+OnrAu8/P+L2/jueVlv8AhG28gYwbVoXAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Self-Hosted build Agent for Azure Pipelines\"\n        title=\"\"\n        src=\"/static/8b2b7aa13c3ae6912e058c2412e659cf/ae6b7/agent_pool.png\"\n        srcset=\"/static/8b2b7aa13c3ae6912e058c2412e659cf/3684f/agent_pool.png 225w,\n/static/8b2b7aa13c3ae6912e058c2412e659cf/fc2a6/agent_pool.png 450w,\n/static/8b2b7aa13c3ae6912e058c2412e659cf/ae6b7/agent_pool.png 655w\"\n        sizes=\"(max-width: 655px) 100vw, 655px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h3>Шаг 2: Генерация Личного Токена Доступа (PAT)</h3>\n<p>Перейдите в раздел Личные Токены Доступа в Настройках Пользователя, расположенных в правом верхнем углу экрана. Назовите его соответствующим образом и предоставьте разрешения в соответствии с вашими требованиями.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 898px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/49e2a60993cc917e12627bc48f419f56/84cc5/PAT.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 93.77777777777777%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAABJ0AAASdAHeZh94AAABrklEQVR42p1UW3KjMBDkfLneHiAnyCm2avOzX/n1Az/KGxsMQrwMCNOhxxniVAWK9VR1DRJSa2Z6JC+OY6xWK5xOJ+z3e+x2uwEcHw4HLJdLZFmGMWvbVjzXek3ToCgK0FdVNaCu629eN/1k1+tV/Ha7hZfnuRDSuq4bBTeNQQ/zfR8eyYwxEoX+/F84574Iy7JEGIZC+giZEjKLIUIKQjB9XTAGJWE2Osf6fyM8Ho+iIgWYIlOB0jSVjDgmOf3lcrkRcqFGNiWKCqPELJVGql4IrbWSLk9g6Fys4JxCRfvJeBhts9mwbTL8O54QRAZBT3yOIjldoYT8nkXYD2FLh11UoshSJIkdvRVTpRgIOei6q/xwfS2aOxFYAmJKqHvBeIVF5cVigfV6DWsTtK7pU6yG3pq6IfdgjcnjkTkIAtjE4D3u63m2SEw8KD/HtIYMyuOmqqpvr0Xq4Ic56kvR1/F2x+dEqW0jhM61iPonTB6Iz833xZ579eiFkEWPgnfYvvvreRmOpiyN/Xud4ddrhD9+ivB868FHCaVtnv8aPD1v8fJmkMcBYpM8TMgH9gMUpsoec+3EigAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Self-Hosted build Agent for Azure Pipelines\"\n        title=\"\"\n        src=\"/static/49e2a60993cc917e12627bc48f419f56/84cc5/PAT.png\"\n        srcset=\"/static/49e2a60993cc917e12627bc48f419f56/3684f/PAT.png 225w,\n/static/49e2a60993cc917e12627bc48f419f56/fc2a6/PAT.png 450w,\n/static/49e2a60993cc917e12627bc48f419f56/84cc5/PAT.png 898w\"\n        sizes=\"(max-width: 898px) 100vw, 898px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 688px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e8a2a3aba07f2d1c964b8767d0d743dd/ebf47/PAT_warning.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 20%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABJ0AAASdAHeZh94AAAAvUlEQVR42oWPWwuCQBCF/f+/KSJL8UJlEhH0YpGXcr3UumZlcdoZCuqph8P5OLOcmTV6WaCXArdTjjrdQh5jtEWKKomgRMLcFpnmVM/2kHnM3mj/iObco2oYfVOhExHkIYJvjTB3TKwDH645wGrmYuFZCD1b52PmQLs/GSL0bZ1b/LZOd3g05buQLyzQVQcspw6yaMNMl5Er7Y2IcSkzFl1KGXGrda2PeKoK97P4LaSASujrtO2fnl/MHe/CF5X6KZXmoIgJAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Self-Hosted build Agent for Azure Pipelines\"\n        title=\"\"\n        src=\"/static/e8a2a3aba07f2d1c964b8767d0d743dd/ebf47/PAT_warning.png\"\n        srcset=\"/static/e8a2a3aba07f2d1c964b8767d0d743dd/3684f/PAT_warning.png 225w,\n/static/e8a2a3aba07f2d1c964b8767d0d743dd/fc2a6/PAT_warning.png 450w,\n/static/e8a2a3aba07f2d1c964b8767d0d743dd/ebf47/PAT_warning.png 688w\"\n        sizes=\"(max-width: 688px) 100vw, 688px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Если у вас возникнут вопросы, попробуйте следовать инструкциям по этой ссылке - <a href=\"https://learn.microsoft.com/en-us/previous-versions/azure/devops/all/java/labs/dockerbuildagent/?view=tfs-2018#generating-an-azure-devops-services-personal-access-token-pat\">PAT key</a>.</p>\n<h3>Шаг 3: Проверка Предварительных Требований</h3>\n<p>Прежде чем начать процесс установки, убедитесь, что ваша система соответствует требованиям, ссылки на требования к каждой из систем приведены ниже.</p>\n<p>• <a href=\"https://learn.microsoft.com/en-us/azure/devops/pipelines/agents/linux-agent?view=azure-devops#check-prerequisites\">Linux</a></p>\n<p>• <a href=\"https://learn.microsoft.com/en-us/azure/devops/pipelines/agents/windows-agent?view=azure-devops#check-prerequisites\">Windows</a></p>\n<p>• <a href=\"https://learn.microsoft.com/en-us/azure/devops/pipelines/agents/osx-agent?view=azure-devops#check-prerequisites\">MacOS</a></p>\n<p>Когда речь идет о безопасности, основные принципы:</p>\n<p>• Защитите папки агента, так как они содержат конфиденциальную информацию.</p>\n<p>• Используйте минимально необходимые разрешения для функциональности агента.</p>\n<h3>Шаг 4: Как получить агент?</h3>\n<p>После создания пула агентов и генерации PAT выберите пул и нажмите Новый Агент. В новом всплывающем окне выберите операционную систему, которая вам нужна, и двигайтесь в соответствии с руководством.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 900px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/03480b7216343449f501b453b8a05ed7/cd536/GetAgent.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 78.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABJ0AAASdAHeZh94AAACxElEQVR42o2Ty0tUcRTHhzZKDwhzY7X3X2jbItAsCIPSTa9Nj00tQkxLMBu1qCA37YIUnAjDVUKQaFCLDB/go5lJZ+5oM87cmft+zX1+O/ObQR2N7MCHc1+/7/2e8/udUDweB8/zyGQyKBQKEAQBoij+E1mSoMhlVEKWREgCraX1oZKgaZpMzHEc/E8Yjg+5GEAhRMtnWSK0ootQNBplH3meh3w+z3BdF0EQMEphGgYKeR6O67H7u2MxHOtZQOPTRZwaWkHj4CKOPlrA/fFfCP2MxiDTX9IFDabtwPe8PY50y4ZqFGHYLgxywfEqVrMKuLyKtKCxvJZTwMs6OYzFoTsBsqIGnxbLsoLf6VI/hXJPCUklhyq1RTGQlTQm/rcoVRSKkWApipbFsmvpKKoibEOlpstQFIWVbJoGLOq1aeiwLLMiUI3vB+VNYX2qCE4s8nj9JYXR72mk0ptbP9p2ga3+7sb3/ZLDWHlTfJ/lNz8EdE5k8Gw6h3Vegk19dVwfNsPbgV+F4/nVgn5F0LcNOLrEyrYMreKr9C7YlyDY6bCyu6/GpnAl/Ba3XkRwh7hdyi/f4ebzUVzrH8b1gRHcGKzmangY94bGoBnWtqBbOWOtPSM4cqEXDW39qLvYh7rWxzjRPoB6uq5p7sbBsw9RS7m2mXJTF7sPne5A/fkeCIq+t+RkJo+5GIelRBoL8XUscVkspXgsE9GNAtY2RSR2sZoRkcxKtA/BXkGBZpJLJmm209hIccjmcsjmBUaOUBQZmqpAJbQd6JpaPoeJRKJccqWHbeFR1Lf24mR7GA2Xn+D4pT4cPteNQy1UbksXapo6q6htfoADZzpwgr4TaQBCSXKz0+H0fBzDn2bwfmoekclZRD7PYpTyCD2LTM5h/NvKHj58XcbHmRg7TiGO47bGpjwxNBG6wrJNE2FqCpyiAc+xGfvFH30Bb93nmBI8AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Self-Hosted build Agent for Azure Pipelines\"\n        title=\"\"\n        src=\"/static/03480b7216343449f501b453b8a05ed7/1cfc2/GetAgent.png\"\n        srcset=\"/static/03480b7216343449f501b453b8a05ed7/3684f/GetAgent.png 225w,\n/static/03480b7216343449f501b453b8a05ed7/fc2a6/GetAgent.png 450w,\n/static/03480b7216343449f501b453b8a05ed7/1cfc2/GetAgent.png 900w,\n/static/03480b7216343449f501b453b8a05ed7/cd536/GetAgent.png 1114w\"\n        sizes=\"(max-width: 900px) 100vw, 900px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h3>Шаг 5: Настройка Агента</h3>\n<p>Мы рассмотрим настройку для Linux в качестве примера, для других операционных систем шаги будут идентичны.</p>\n<p>После того как вы нажали \"Скачать\" или скопировали URL, вам нужно будет войти в свою локальную машину, на которой мы будем устанавливать агент.</p>\n<p>Создайте папку агента и перейдите в нее с помощью следующей команды:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">mkdir</span> myagent <span class=\"token operator\">&amp;&amp;</span> <span class=\"token builtin class-name\">cd</span> myagent</code></pre></div>\n<p>Скачайте агент с помощью следующей команды в случае Linux:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">wget</span> https://vstsagentpackage.azureedge.net/agent/3.240.1/vsts-agent-linux-x64-3.240.1.tar.gz</code></pre></div>\n<p>Распакуйте содержимое:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">tar</span> zxvf ./vsts-agent-linux-x64-3.240.1.tar.gz</code></pre></div>\n<p>После извлечения содержимого настройте агент с помощью запуска скрипта:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">./config.sh</code></pre></div>\n<p><img src=\"Command_line.png\" alt=\"Self-Hosted build Agent for Azure Pipelines\"></p>\n<p>Укажите URL сервера (<code class=\"language-text\">https://dev.azure.com/&lt;имя вашего проекта></code>), ключ PAT, имя созданного вами пула агентов, имя агента и рабочую папку.</p>\n<p>После настройки агента он отобразится в вашем пуле в Azure DevOps с красной отметкой - <code class=\"language-text\">Offline</code>.</p>\n<p>Вы можете запустить агента в интерактивном режиме с помощью команды:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">./run.sh</code></pre></div>\n<p>Это переведет вашего агента из Оффлайн в Онлайн. Однако после завершения работы <code class=\"language-text\">./run.sh</code> наш агент снова перейдет в оффлайн и не будет доступен для развертывания, пока мы его снова не запустим.</p>\n<p>Чтобы исключить необходимость рутинных действий и иметь агента, который всегда на связи, мы настроим его как сервис.</p>\n<p>Мы можем создать сервис с помощью скрипта:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">./svc.sh <span class=\"token function\">install</span> <span class=\"token operator\">&amp;&amp;</span> ./svc.sh start</code></pre></div>\n<p>Или с помощью создания файла конфигурации сервиса\nДля этого откройте редактор для создания файла сервиса</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">nano</span> /etc/systemd/system/agent.service</code></pre></div>\n<p>Скопируйте и вставьте следующее содержимое:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token punctuation\">[</span>Unit<span class=\"token punctuation\">]</span>\n<span class=\"token assign-left variable\">Description</span><span class=\"token operator\">=</span>Azure-devops-agent-ubuntu <span class=\"token function\">service</span>\n\n<span class=\"token punctuation\">[</span>Service<span class=\"token punctuation\">]</span>\n<span class=\"token assign-left variable\">User</span><span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>your username<span class=\"token operator\">></span>\n<span class=\"token assign-left variable\">ExecStart</span><span class=\"token operator\">=</span>/path/to/your/agent/run.sh\n<span class=\"token assign-left variable\">Restart</span><span class=\"token operator\">=</span>always\n\n<span class=\"token punctuation\">[</span>Install<span class=\"token punctuation\">]</span>\n<span class=\"token assign-left variable\">WantedBy</span><span class=\"token operator\">=</span>multi-user.target</code></pre></div>\n<p>Не забудьте заменить <code class=\"language-text\">&lt;ваше имя пользователя></code> и <code class=\"language-text\">/путь/к/вашему/агенту/run.sh</code> на актуальные данные.</p>\n<p>После сохранения файла активируйте и запустите сервис:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> systemctl daemon-reload\n<span class=\"token function\">sudo</span> systemctl <span class=\"token builtin class-name\">enable</span> agent.service\n<span class=\"token function\">sudo</span> systemctl start agent.service\n<span class=\"token function\">sudo</span> systemctl status agent.service</code></pre></div>\n<p>Теперь сервис для вашего агента Azure активирован и будет работать непрерывно, он уже готов принимать задания!</p>\n<h3>И последнее</h3>\n<p>Установка Агента Azure является ключевым шагом в автоматизации процессов сборки и развертывания. Следуя подробным инструкциям для каждой операционной системы, вы можете обеспечить бесперебойную и безопасную интеграцию со службами Azure.</p>\n<p>Мы надеемся, что наше руководство было полезно для вас. Если у вас возникнут вопросы или потребуется дополнительная помощь, пожалуйста, обратитесь к официальной документации Azure.</p>","wordCount":{"words":680}},"author":{"frontmatter":{"authorAlias":"Podryabinkina","author":"Алина Подрябинкина","authorPosition":"DevOps инженер","authorPhoto":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAZCAIAAAC+dZmEAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFbElEQVR42lWSiVPSaRjHf2ur8Du4BDVFVBRFKwhQDm/EEvFC8wKtPKFMbb0qNa0pa7dZK9NJrbTNjMQDvEIRFfHWwANrdmd3/5p90cmZnXnmnWfeeT7P9zvf94W2F/S7llG71bi/ajxYnfq2teDcMn/fnt+xjD6oLlKIwqVcZgSdFhXKyI7nNWtVzo0vf35dPNqaP9qagwC5uzjqWAHw1MHqtHPDDPhdy8i9UuVlfog8MjQ2IlAli72RlawQc/wphOJM2dflib8cy86NY9i+NL5nNRzYDIerkwerM0ebpu62G1mSiDxZZHbshfay3L0ZnU3XP/b8YVNJbiCNXJGv+LY9v79ugoCsfWnMsQz4cefa9NHmnG1qUJMRXZAcVZoZXyIXfuho+LY6t2cet09/WtX1lytTRGzGl+GXdusUUNYD0mGd2FsxHK5NH26Y+h/VZonCSjLitXmyluIUq67/X/um0zqzM/NpTf/utzqNJDzgj87mLfMotLvkUgbk/orBuTm7bhquzU/KFIaVZcbdLpB21V93Wk1/79gOlyftJr1V1/dAoxYE+rxs0W6a9ZB9eQzI7ruUJ452TLqedrWMV5jAqVMladNFpZdiOirU62MDh4vG7anhhcGu2vw0Mcv3WZ162TgIOZbH9q1AFqQ9aV8xPL5VcCU6ouZKbEdlelO+vDontfeXsjX9W+OrDo1CWiJPSLwYrohiv2ouN+v7oOOoJlye16ct4723smIq04S3M4Rv60u+z4/vzY5sTw475sYG2xvVSTFyTiifFSAXsF61li8aBqBjzwbHysTB+sybjtrKVEGjKlGTxJ3vevSPbeFoaXbPNLpj/GR+37P45kV3vYbD9Eu5GNTdVmmb/eiyDZQP1qbWvwzdLUq+nRffmB9XIeOPP2u1fXxt072xDfWujQzMvP593zDce6cmzJemFLJeP9Cumj6DwPQgs4ONmeHnd7SpvKai5NocSZmUO9n31DLUszLQYxnsGrxf8/lpy0LvswwxP4xOzYtmPdTmbC2MQl8X9Y4Vw7pp6Nfq7KoMYZNaWqMUpZzz62mtso0OTNfVW+qahrTlEz2PmkquYB7unCCvVB6jMl2ybRmDdiyfwcce6my8o0poUCVWZYk0qXw+w7Mgjmse7t6d1c8+eaBrqbt/s/gc0+8c0zfcjyIO8UrjBS2AtMEnmf7Q+bAy/V7J5XpV4nXZhauy86yzZAGLUadKN77rmhvp06iVVALK8CLTKQQGBePQKZJgb+NgJwRyetFY3KrJvFsmv6UU54hDc+PYdCoRQzEYD3sSMLoXze0nNwqZSKeRfQgonUzww/Ayfph18j3U3aYtlIvz5ZLGq7LSyxcVAmZKZLA3lUQhe8Iw9rM7zu2MO4ygBAwlIngiHkcjIAFUQjIvuLk8G+KFh1xgBxelRTcUSvNjwrPELCHbD4ExIpEMw+hJ4fEIgqCgA2aoGMI86wky5wbQoOCggEuxgsbrqTVKSY4oNCeG7e9FxsMoihIQBDshf6yAQVFQ2IuE+VJJ/jQKFMmNuJaV0K7NqJALipM4SfwQnAslAPH/k64Gh0dJKOpFxKgkAoVIgERcdnWxvK0sRaOILFFE+Xp5euBgMHcMY/Cx+Al8XCgRw8LoNLq3J9OPBkl47LabGfeK4huuJvEjmO4eMHB7MgpgcOJwMM5l2HWDwCA4LJxOpdMoPp5kKDdF+KQqtfmaVCo+jz91iD+VcvVgC8AQmIgiRLD6fKA3iofdPfBQvTrhcXmCMoGDYkTwJMdSP7DTqI9JF4wS8HhMEOZPIxGAR6ilUFyWygv090UQEoaQwBwMCg8Mn6Z1kpyrUATzwCHcUEagD9XtjMd/4LIQtzGUCroAAAAASUVORK5CYII="},"images":{"fallback":{"src":"/static/20f2a8d8398e868f0d50bd7fb356ffdb/c032f/author.jpg","srcSet":"/static/20f2a8d8398e868f0d50bd7fb356ffdb/1f64c/author.jpg 16w,\n/static/20f2a8d8398e868f0d50bd7fb356ffdb/af0fe/author.jpg 32w,\n/static/20f2a8d8398e868f0d50bd7fb356ffdb/c032f/author.jpg 64w,\n/static/20f2a8d8398e868f0d50bd7fb356ffdb/464e8/author.jpg 128w","sizes":"(min-width: 64px) 64px, 100vw"},"sources":[{"srcSet":"/static/20f2a8d8398e868f0d50bd7fb356ffdb/8cd5f/author.avif 16w,\n/static/20f2a8d8398e868f0d50bd7fb356ffdb/34a4f/author.avif 32w,\n/static/20f2a8d8398e868f0d50bd7fb356ffdb/d6ed5/author.avif 64w,\n/static/20f2a8d8398e868f0d50bd7fb356ffdb/8b866/author.avif 128w","type":"image/avif","sizes":"(min-width: 64px) 64px, 100vw"},{"srcSet":"/static/20f2a8d8398e868f0d50bd7fb356ffdb/94d43/author.webp 16w,\n/static/20f2a8d8398e868f0d50bd7fb356ffdb/6c901/author.webp 32w,\n/static/20f2a8d8398e868f0d50bd7fb356ffdb/aa76d/author.webp 64w,\n/static/20f2a8d8398e868f0d50bd7fb356ffdb/5e01a/author.webp 128w","type":"image/webp","sizes":"(min-width: 64px) 64px, 100vw"}]},"width":64,"height":80}}}}}},"pageContext":{"id":"49d0c78e-98c5-5910-b945-6722a64f8939","lang":"ru","markupData":{"bannerTitle":"ВЕРНЕМ БЛОГГИНГ В ТРЕНД","blogByAuthorBannerTitle":"Записи автора","blogByHashtagBannerTitle":"Записи, содержащие","head":"Блог CodeCave","readPostLink":"Читать дальше","readingTimeTitle":"Время прочтения","readingTimeUnits":"мин","postFooterTitle":"Поздравляем! Теперь ты можешь похвастаться новыми знаниями!","postFooterText":"Если тебе хотелось бы увидеть наш взгляд на какие-то еще широко неизвестные факты, с нами можно связаться в соцсетях или по имейлу. Увидимся!","sharePostTitle":"Поделиться","readMoreOnTopicTitle":"Найти еще по теме","blogSectionTitle":"новое в блоге","blogSectionLinkTitle":"перейти в блог","image":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAD1UlEQVR42pWUX0zTVxTHCwT501JKaWmBrsUV5N9gIixsuqgwlDCge7Hooli0yp9ZRR+0BdryxxU7oVCQgC3Kn1IMf0S3xLlMI2Mapw+a6JMGX9yMe3EPbvoimHw99xJJnIPpw82vub33ez7nnO89gqioKLzLkkqlkMvliI6O5r+XOid4FzEmFBkZiaCgIISFhSEiIoKLMvH3EnxNFRwcDI1GA4vFgry8PHyo1UIsFkMoFEImk71BvKQgOygSibiYXl+Ge/fu4+X8PC5f+hkOhwOmfSZkrc7ixOHh4Yu0gv+iYt+AgABotYnw+/2Ym5vDo0e/49zUJI47nejr7cXQ4BDcnW7UVNcgOzsbK1aEcGrBv6lYtNDQUOytrMTjx3/i+fNnuHv3DsbHx+AbHibRKTTa7XC1tWNsbAxdbjfG6Wsxm6GKVy0IMiGGHBgYiKysNbh48SeieoHZ2fu4dvVXDA0MwNXeDk9fH/wjI7h58wbOjI7CcsSMbncXBgdOw+v1ID09HQKWIqsD66KZojx58hf++fspZn6ZRmdHB4YHB9F+vA1ej4eo2jjZMUcrJscniK6LU/d0d6PJ3rggyCyQm5uLW7duY36eavXHQ/zw/Xn0e7041d/Pa+Y96eE0vmEfJicmUF1ZBVPNN+jt6eGp7qqoQN6GjdwJnDAjI4NHYh1sqKuDo+UoRkf8sFutOEkNsFlt2GUwoKW5mUjsGDh9Ctd/u4ZOlwtlej0+ycmBtb4BO7Zvh4DVLiQkBPFxcWhqbKRauehyBewNVkydPcvJeohk+so0Dpj2o+07J2ZmpvFgdhaObx3YuH49mumeTqdb6LJEIqHuxEOjVnPL6LdswYkT3TAfPgLDjnK0kud+vHAB9XX1VAIvX9VVVbyue4xGnhGzDXMGu79om5UJCUhOToaYapqelkYCdXAec2KvcQ8tI5ytrWhpaoKupBRRBJFDIpsKNkFNIEzsLWOLqcuMNjMjE6XFJRCSH4uKiqhuLZzyYG0t1n62Fh9RJ5kjNhcU4PN167hvme3eenrszUrooMGwE1/pSpFEr0ROB9UaNfabTCjcXEj12oBDtQfxRX4+PiVnlBQXLw6KNwTZBouUTw9/xOfj6bP91ZkfIykxkYgk2Fa2FUeJ1mazwWjcDZFQxJuw5LRh6SoUCqKSQ6P6AAlqDd9TqVT4eus2lJeXIzU1FV8WFiJOGcvT/t/xxQRer/jYOEpbC6VCSeWIgTJGgZSkVVDExCCS/pe+z4BlhxmBTBYNbcJKJCcmIS0lBbFKJQ+23AxddsCyywvCMkhYEE4mXVbwFQflxPovnsZUAAAAAElFTkSuQmCC"},"images":{"fallback":{"src":"/static/b358397f973ed74732db29698c1773d1/30cdc/blog.png","srcSet":"/static/b358397f973ed74732db29698c1773d1/7458e/blog.png 75w,\n/static/b358397f973ed74732db29698c1773d1/de3a1/blog.png 150w,\n/static/b358397f973ed74732db29698c1773d1/30cdc/blog.png 300w","sizes":"(min-width: 300px) 300px, 100vw"},"sources":[{"srcSet":"/static/b358397f973ed74732db29698c1773d1/eb54c/blog.avif 75w,\n/static/b358397f973ed74732db29698c1773d1/81307/blog.avif 150w,\n/static/b358397f973ed74732db29698c1773d1/aa5b9/blog.avif 300w","type":"image/avif","sizes":"(min-width: 300px) 300px, 100vw"},{"srcSet":"/static/b358397f973ed74732db29698c1773d1/18188/blog.webp 75w,\n/static/b358397f973ed74732db29698c1773d1/c65bc/blog.webp 150w,\n/static/b358397f973ed74732db29698c1773d1/078c3/blog.webp 300w","type":"image/webp","sizes":"(min-width: 300px) 300px, 100vw"}]},"width":300,"height":300}}}},"site":{"siteUrl":"https://www.codecave.by"},"authorAlias":"Podryabinkina","authorId":"135463f9-a278-5f1c-89b4-def871c0c359"}},"staticQueryHashes":["2595676272","2708699711","639074693"],"slicesMap":{}}